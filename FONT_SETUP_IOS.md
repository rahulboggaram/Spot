# Inter Font Setup for iOS App and Widget

This guide explains how to ensure Inter fonts work on both the iOS app and iOS widget.

## Current Configuration

### ✅ Already Configured:
1. **Font files exist**: `assets/fonts/Inter-*.ttf` (6 font files)
2. **React Native loading**: Fonts loaded via `useFonts` in `app/_layout.tsx`
3. **Widget Info.plist**: Fonts registered in `targets/widget/Info.plist`
4. **app.json**: Fonts now registered in iOS `infoPlist.UIAppFonts`

## Required Steps in Xcode

After running `npx expo prebuild`, you need to manually add fonts to both targets in Xcode:

### 1. Add Fonts to Main App Target

1. Open the project in **Xcode**
2. Select the **main app target** (Spot, not SpotWidgetExtension)
3. Go to **Build Phases** tab
4. Expand **Copy Bundle Resources**
5. Click the **+** button
6. Navigate to `assets/fonts/` and add all 6 Inter font files:
   - `Inter-Regular.ttf`
   - `Inter-Medium.ttf`
   - `Inter-SemiBold.ttf`
   - `Inter-Bold.ttf`
   - `Inter-ExtraBold.ttf`
   - `Inter-Black.ttf`
7. Ensure all fonts are checked for the main app target

### 2. Add Fonts to Widget Extension Target ⚠️ CRITICAL

**This is the most common issue!** The widget extension is a separate target and needs its own copy of fonts.

1. In the same Xcode project, select the **widget** target (or **SpotWidgetExtension** - name may vary)
2. Go to **Build Phases** tab
3. Expand **Copy Bundle Resources**
4. **Check if the 6 Inter font files are already listed:**
   - If YES: Ensure they're all checked/enabled
   - If NO: Click the **+** button and add all 6 Inter font files from `assets/fonts/`
5. Verify all fonts are checked for the widget extension target

**Visual Check:**
- In the left Project Navigator, you should see the font files listed under the widget target
- In Build Phases → Copy Bundle Resources, you should see all 6 Inter-*.ttf files

### 3. Verify Info.plist Files

#### Main App Info.plist
The main app's Info.plist should be auto-generated by Expo with:
```xml
<key>UIAppFonts</key>
<array>
  <string>Inter-Regular.ttf</string>
  <string>Inter-Medium.ttf</string>
  <string>Inter-SemiBold.ttf</string>
  <string>Inter-Bold.ttf</string>
  <string>Inter-ExtraBold.ttf</string>
  <string>Inter-Black.ttf</string>
</array>
```

#### Widget Info.plist
The widget's Info.plist (`targets/widget/Info.plist`) already has:
```xml
<key>UIAppFonts</key>
<array>
  <string>Inter-Regular.ttf</string>
  <string>Inter-Medium.ttf</string>
  <string>Inter-SemiBold.ttf</string>
  <string>Inter-Bold.ttf</string>
  <string>Inter-Black.ttf</string>
</array>
```

## Font Name Verification

### React Native App
Font names used in code must match exactly:
- `'Inter-Regular'` (matches `Inter-Regular.ttf`)
- `'Inter-Medium'` (matches `Inter-Medium.ttf`)
- `'Inter-SemiBold'` (matches `Inter-SemiBold.ttf`)
- `'Inter-Bold'` (matches `Inter-Bold.ttf`)
- `'Inter-ExtraBold'` (matches `Inter-ExtraBold.ttf`)
- `'Inter-Black'` (matches `Inter-Black.ttf`)

### iOS Widget (Swift)
Font PostScript names used in Swift code:
- `"Inter-Regular"` (matches `Inter-Regular.ttf`)
- `"Inter-Medium"` (matches `Inter-Medium.ttf`)
- `"Inter-SemiBold"` (matches `Inter-SemiBold.ttf`)
- `"Inter-Bold"` (matches `Inter-Bold.ttf`)
- `"Inter-Black"` (matches `Inter-Black.ttf`)

## Testing Font Loading

### React Native App
Check the console logs when the app starts:
- ✅ Should see: `"✅ All Inter fonts loaded successfully"`
- ❌ If you see errors, check that fonts are in "Copy Bundle Resources"

### iOS Widget
The widget code has a fallback to system fonts if Inter doesn't load. To verify:
1. Build and run the widget
2. If Inter fonts load, text will use Inter
3. If not, it will fallback to SF Pro (system font)

## Common Issues & Solutions

### Issue: Fonts work in app but not in widget

**Solution:** Widget extension is a separate target. You MUST add fonts to widget's "Copy Bundle Resources":
1. Select **widget** target in Xcode
2. Build Phases → Copy Bundle Resources
3. Add all 6 Inter font files if not already there
4. Clean build (⌘⇧K) and rebuild

### Issue: Fonts are in Copy Bundle Resources but still not showing

**Possible causes:**
1. **Font PostScript name mismatch**: The name in code doesn't match the actual PostScript name in the font file
   - Run: `node scripts/verify-font-names.js` to check font files
   - Verify PostScript names in Font Book (macOS)
2. **Info.plist missing fonts**: Check that `UIAppFonts` array includes all fonts
3. **Cache issue**: Delete app, restart device, rebuild

## Troubleshooting

### Fonts Not Loading in App

1. **Check font files exist**: Verify all 6 `.ttf` files are in `assets/fonts/`
2. **Rebuild**: Run `npx expo prebuild --clean` then rebuild in Xcode
3. **Check Xcode**: Ensure fonts are in "Copy Bundle Resources" for main app target
4. **Check console**: Look for font loading errors in Xcode console

### Fonts Not Loading in Widget

1. **Check widget Info.plist**: Verify `targets/widget/Info.plist` has `UIAppFonts` array
2. **Check Xcode**: Ensure fonts are in "Copy Bundle Resources" for **SpotWidgetExtension** target
3. **Rebuild widget**: Clean build folder (⌘⇧K) and rebuild
4. **Verify font names**: Swift code uses PostScript names (e.g., `"Inter-Regular"`)

### Font Names Don't Match

If fonts still don't load, the PostScript name inside the font file might be different:
1. Open font file in Font Book (macOS)
2. Check the "PostScript name" shown
3. Update Swift code to use the exact PostScript name

## Quick Checklist

- [ ] Font files exist in `assets/fonts/`
- [ ] `app.json` has `ios.infoPlist.UIAppFonts` configured
- [ ] `targets/widget/Info.plist` has `UIAppFonts` array
- [ ] Fonts added to main app "Copy Bundle Resources" in Xcode
- [ ] Fonts added to widget extension "Copy Bundle Resources" in Xcode
- [ ] Rebuilt app after adding fonts
- [ ] Rebuilt widget after adding fonts

## After Making Changes

1. **Clean build**: In Xcode, Product → Clean Build Folder (⌘⇧K)
2. **Rebuild**: Product → Build (⌘B)
3. **Run**: Product → Run (⌘R)
4. **For widget**: Remove widget from home screen and re-add to force refresh
